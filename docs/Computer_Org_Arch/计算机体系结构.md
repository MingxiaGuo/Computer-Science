# 1. 计算机体系结构

## 1.1 什么是计算机体系结构

**体系结构**：

* **指令集体系结构**(**ISA**)：描述**程序员**看到的计算机的**抽象视图**，并定义汇编语言和编程模型，之所以说它是抽象的，是因为它没有考虑计算机的实现

* **微体系结构**：描述一种指令集体系结构的实现方式，微体系结构关注计算机的**内部设计**

* **系统体系结构**：关注包括处理器、存储器、总线和外设在内的整个系统。

**计算机**：接受输入者的指令和资料，经由CPU处理，产生出有用的信息。

**计算机系统**包括读取并执行程序的**中央处理器**(CPU: Central processing unit)，保存程序和数据的**存储器**，和**输入输出**子系统，这些子系统使CPU与显示器、打印机等外部设备之间的通信更容易。冯诺依曼机

与**计算机性能**相关：

* CPU
* 内存，cache
* 外部设备

**信息**：即**程序**和**数据**，保存在存储器中，为实现不同目的，计算机使用不同类型的存储器，如cache，主存(内存)，辅存等多个存储层次，大多数处理器在CPU内集成片上cache。

**Cache**(2M)是存放常用数据的高速、专业存储器，**主存**(2G,8G,16G)中存放了大量工作数据，**辅存**(500G,1T)指磁盘和CD-ROM、能存海量数据。

组成计算机的各个子系统通过**总线**连在一起，数据通过总线从计算机中的一个位置传递到另一个位置。



可编程计算机接收两种类型的输入：要处理的数据，以及要如何处理输入数据的程序。程序不过是计算机所执行的完成给定任务的操作序列。

数字计算机的结构：分为两部分：CPU和存储器系统，cpu读程序并完成指定操作，存储器系统保存两类信息：程序，程序处理或产生 的数据。

寄存器是CPU内部用来存放数据的存储单元

时钟提供了脉冲流，所以内部操作都在时钟脉冲的触发下进行，时钟频率是决定计算机速度的一个因素。

**程序执行的过程**

从存储器读出一条z=x+y的指令，将其发送给解释单元，解释单元产生控制信号，驱动这条指令的执行。假定这个程序的功能是从存储器读出两个数据x和y，将它们相加，然后写回存储器。

要执行这个程序，cpu先从存储器中取出一条指令，在cpu分析或解码这条指令后，从存储器中读出这条指令所需的所有数据。

第一条指令，LOAD X，从存储器中读出变量x的值，并将它暂存在寄存器中。

第二条指令，LOAD Y，从存储器中读出变量Y的值，并保存在另一个寄存器中。

第三条指令，z=x+y，将两个寄存器内容相加，并将结果保存在第三个寄存器中。

第四条指令，STORE Z，将加法的结果写回存储单元z。



**计算机指令**：有上百种不同指令。6条基本指令

* MOVE A,B :将B的值复制到A
* LOAD A,B ：将存储单元B的值复制到寄存器A中
* STORE A,B ：将寄存器B的值复制到存储单元A中
* ADD A,B ：A与B相加，结果保存到A中
* TEST A ：测试A的值是否为0
* BEQ Z ：若最后一次测试结果为TRUE，执行地址Z处的代码，否则继续执行。

## 1.2 体系结构和组成

计算机体系结构含有结构(structure)的意思，描述了一些与计算机组成方式有关的内容。之所以定义计算机体系结构，是因为不同的用户会从完全不同的角度看待计算机。**计算机体系结构**通常被认为是**程序员视角中的计算机**。程序员看到的是计算机的抽象视图，计算机的实际硬件和实现被隐藏起来了，这个抽象视图现在通常被称作**指令集体系结构**(ISA, instruction set architecture)。

计算机组成表示其体系结构的**具体实现**，计算机组成是计算机体系结构的实例化。即**抽象变为具体**。

用“**体系结构(System Architecture)**”代表计算机的抽象指令集体系结构(它的指令集)，用“**组成**”代表计算机的实际硬件实现。

**寄存器**：存放**一个单位**的数据或字数据的存储单元。寄存器通常用它所保存数据的位数来描述。典型的有8位，16位，32位，64位

寄存器与存储器中的字存储单元无本质区别。二者的实际差别在于寄存器**位于CPU内**，它的**访问速度**远快于访问CPU外的存储器。

**机器码&汇编语言&高级语言**

计算机上执行的代码表示为二进制0和1组成的串，被称作机器码，每种计算机只能执行一种特定的**机器码**

人类可读的机器码叫做**汇编语言**

能在类型完全不同的计算机上运行，与底层计算机体系结构几乎没关系的代码叫**高级语言**，在执行之前，高级语言程序必须先被编译为计算机的本地机器码。

**时钟**：绝大多数数字电子电路都带有一个时钟，用以生成连续的间隔固定的**电脉冲流**，之所以成为时钟，是因为可用这些电脉冲来计时或确定计算机内所有事件的顺序，如处理器可能会在每一个时钟脉冲到来时执行一条新指令。

RISC和CISC

RISC(精简指令集计算机)体系结构

* 设计策略：是使用少量的指令完成最少的简单操作
* 缺点：程序设计更难，复杂指令需要用简单指令模拟
* 应用：ARM处理器

CISC(复杂指令集)体系结构

* 设计策略：使用大量的指令，包括复杂指令
* 优点：程序设计更容易，每个简单或复杂的任务都有一条对应的指令，不需要写一大堆复杂的指令去完成任务。
* 缺点：指令集的复杂性使CPU和控制单元电路非常复杂
* 应用：Intel处理器

## 1.3 计算机的发展

1.3.1 机械计算机

1.3.2 机电式计算机

1.3.3 早期的电子计算机

1.3.4 微机和PC革命

1.3.5 摩尔定律和进步的历程

**乱序执行**：改变指令的执行顺序提高计算机的速度。

1.3.6 存储技术发展

覆盖着电容的旋转的磁鼓 --> 阴极射线管 --> 铁氧体磁芯存储器 --> 磁盘 --> 光存储器(DVD等)

成本越来越低，存储的数据量和传输性能越来越高，

1.3.7 普适计算：计算是无处不在的

1.3.8 多媒体计算机: 处理音频，视频。需要很大的存储容量以及完成大量简单重复操作的事实处理声音样本的图像像素的能力。

## 1.4 存储程序计算机

状态图

## 1.5 存储程序概论

## 1.6 计算机系统概览

## Computer Performance

吞吐量
响应时间
利用率
总线宽度
存储器带宽
CPU时钟周期
主频
cpu执行时间
	主频
	外频
	信频
	基本字长
	地址总线宽度
	数据总线宽度
CPI
MIPS
FLOPS
硬件指标
	处理机字长|机器字长
	存储容量
	运算速度



cpu执行时间

1. 不同的微指令集會導致CPU工作效率的優劣
2. CPU时脉：CPU每秒钟可以进行的工作次数。Intel的 i7-4790 CPU時脈為3.6GHz， 表示這顆CPU在一秒內可以進行3.6x109次工作，每次工作都可以進行少數的指令運作。不同的CPU之間不能單純的以時脈來判斷運算效能喔！這是因為每顆CPU的微指令集不相同，架構也不見得一樣。所以，時脈目前僅能用來比較同款CPU的速度！
