# 7. The Central Process Unit-CPU中央处理器

> 用ALU和寄存器做CPU



我们已经做了一个算计逻辑单元ALU，输入二进制它会执行计算，还做了两种内存：寄存器(很小的一块内存，能存一个值)；RAM(一大块内存，能在不同地址存大量数字)，现在把这些放在一起，组建计算机的“心脏”——CPU。

CPU负责执行程序，程序由一个个指令(Instruction)组成,它们指示计算机要做什么，CPU会让ALU进行数学运算，也可能是内存指令，CPU会和内存通信，然后读/写值，CPU里有很多组件。我们把重点放在功能，而不是一根线具体怎么连，当我们用一条线连接两个组件时，这条线只是所有必须线路的一个抽象，这种高层次视角叫“微体系架构(microarchitecture)”

取1个RAM(为了简单，它只有16个位置，每个位置存8位)，4个8位寄存器A,B,C,D(寄存器用来临时存数据和操作数据)， 数据和程序都可以存在内存里。给CPU支持的所有指令分配一个ID。在这个假设的例子中，我们用前四位存“操作代码”(operation code),简称操作码opcode，后四位代表数据来自哪里，可以是寄存器或内存地址。

![](../assets/7-指令表.png)

我们还需要两个寄存器来完成cpu，1.一个寄存器追踪程序运行到哪里了，我们叫它“指令地址寄存器”(instruction address register),存当前指令的内存地址；2.另一个寄存器存当前指令，叫“指令寄存器”。当启动计算机时，所有寄存器从0开始。举例：我们在RAM里放一个程序，

* 拼个CPU出来
* CPU怎么执行指令
* RAM+寄存器+ALU做个CPU
* 解释“取指令->解释->执行”这个循环
* 时钟是什么，时钟速度和赫兹
* 超频提升性能，降频省电