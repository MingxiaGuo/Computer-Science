## 1.7 计算机网络的体系结构
相互通信的两个计算机系统必须高度协调工作才行，而这种“协调”是相当复杂的。“分层”可将庞大而复杂的问题，转化为若干较小的局部问题，而这些较小的局部问题就比较易于研究和处理。

几个 基本概念：

* ISO：国际标准化组织
* OSI/RM：互联网法律上的国际标准
* TCP/IP Suite：互联网事实上的国际标准
* Network Protocols ：数据交换遵守的规则、标准或约定。计算机有相同的协议才能通讯，不同语言的人无法交流。 
* 网络体系结构：计算机网络各层及其协议的集合

### 1.7.1 协议

只要遵循 OSI 标准，一个系统就可以和位于世界上任何地方的、也遵循这同一标准的其他任何系统进行通信

法律上的国际标准 OSI 并没有得到市场的认可，而非国际标准 TCP/IP 获得了最广泛的应用。

协议：为进行网络中数据交换而建立的规则标准或约定；使用不同协议的计算机无法通讯，除非在网关进行协议转换。

### 1.7.2 协议三要素:

①**.语法**：数据交换的格式与信息结构

②**.语义**：需要发出何种控制信息 完成何种动作、、

③**.同步**：事件实现顺序详细说明

### 1.7.3 分层思想的好处：

①**.**分层之间**相互独立**，无需知道下层如何实现

②**.**灵活性好：对本层修改只要保持接口不变，上下层不受影响

③**.**结构上可分割开：各层都可采用最合适的技术实现

④**.**易于实现和维护：系统被分解成若干独立子系统

⑤**.**能促进**标准化**工作：每一层功能都做出精选说明

### 1.7.4 体系结构：计算机网络的各层及其协议的集合；

![](assets/计算机网络体系结构.png)

从本质上讲，TCP/IP只是最上面三层，网络接口层没什么具体内容，学习时往往综合这两种体系结构优点，采用五层结构：从上往下依次是：应用层，运输层，物理层，数据链路层，物理层。

OSI 七层：

* 应用层：能够产生网络流量和用户交互的应用程序

* 表示层：加密、压缩，开发人员要考虑的一层 ，乱码是表示层出现问题

* 会话层：服务和客户端建立的会话，查木马 netstat -nb

* 传输层：可靠传输\(建立会话，看电影\)、不可靠传输\(qq聊天，屏幕广播软件\)、流量控制

* 网络层：选择最佳路径\(用动态路由协议实现\)、IP地址编址

* 数据链路层：数据如何封装、添加物理层地址 MAC

* 物理层：规定电压、接口标准

传输层、网络层、数据链路层是网络工程师做的事情。

网络排错：从底层到高层：

1. 网线是否插好 -&gt; 物理层
2. IP地址是否设对 -&gt; 网络层
3. IE浏览器是否中恶意插件 -&gt; 应用层

网络安全 和OSI参考模型

* 物理层安全：某公司在墙上安装很多接口，后来某几个房间空着租给另一个公司，另一个公司的计算机就能通过墙上的接口访问该公司数据出现安全问题
* 数据链路层安全：ADSL 拨号上网密码，无线密码
* 网络层安全：路由器设置哪个网段能连互联网，哪些网段不能连互联网
* 应用层安全：Sql 注入漏洞 、上传漏洞

### 1.7.5 各层主要功能简介：

①.应用层：直接为用户应用进程服务，

②.运输层：为两个主机中进程之间通信提供服务

③.网络层：将运输层报文封装后进行传送，并选择路由

④.数据链路层：在相邻两个主机间点对点传送

⑤.物理层：透明传输比特流

数据在各层之间传递过程示意（假定两点直连）

![](./assets/主机1向主机2发送数据.png)主机1向主机2发送数据

### 1.7.6 协议与服务的区别：

实体\(entity\)：任何可发送或接收信息的硬件或软件进程；

协议\(protocol\)：控制两个对等实体进行通信的规则的集合；

①协议的实现保证了向上层提供服务，下面的实体是透明的，上层只能看到下层的服务，看不到协议

②协议是水平的，而服务是垂直的；

服务\(service\)：下层向上层提供服务，上层需要使用下层提供的服务来实现本层的功能。

服务数据单位：层与层之间交换的数据的单位；

服务点访问\(SAP\)：相邻两层实体间交换信息的地方；

一个有关网络协议的例子：白军和蓝军问题【例题1-1】

IP协议在Internet网中处于核心地位

![](./assets/沙漏计时器形状的TCP/IP协议簇.png)

