### 6.4.1 概述

万维网 WWW \(World Wide Web\)并非某种特殊的计算机网络。万维网是一个大规模的、联机式的信息储藏所。万维网用链接的方法能非常方便地从因特网上的一个站点访问另一个站点，从而主动地按需获取丰富的信息。这种访问方式称为“链接”。

万维网提供分布式服务





超媒体与超文本

万维网是分布式超媒体\(hypermedia\)系统，它是超文本\(hypertext\)系统的扩充。一个超文本由多个信息源链接成。利用一个链接可使用户找到另一个文档。这些文档可以位于世界上任何一个接在因特网上的超文本系统中。超文本是万维网的基础。超媒体与超文本的区别是文档内容不同。超文本文档仅包含文本信息，而超媒体文档还包含其他表示方式的信息，如图形、图像、声音、动画，甚至活动视频图像。



万维网的工作方式

万维网以客户服务器方式工作。浏览器就是在用户计算机上的万维网客户程序。万维网文档所驻留的计算机则运行服务器程序，因此这个计算机也称为万维网服务器。客户程序向服务器程序发出请求，服务器程序向客户程序送回客户所要的万维网文档。在一个客户程序主窗口上显示出的万维网文档称为页面\(page\)。



万维网必须解决的问题

\(1\) 怎样标志分布在整个因特网上的万维网文档？使用统一资源定位符 URL \(Uniform Resource Locator\)来标志万维网上的各种文档。使每一个文档在整个因特网的范围内具有唯一的标识符 URL。

\(2\) 用何协议实现万维网上各种超链的链接？在万维网客户程序与万维网服务器程序之间进行交互所使用的协议，是超文本传送协议 HTTP \(HyperText Transfer Protocol\)。HTTP 是一个应用层协议，它使用 TCP 连接进行可靠的传送。

\(3\) 怎样使各种万维网文档都能在因特网上的各种计算机上显示出来，同时使用户清楚地知道在什么地方存在着超链？超文本标记语言 HTML \(HyperText Markup Language\)使得万维网页面的设计者可以很方便地用一个超链从本页面的某处链接到因特网上的任何一个万维网页面，并且能够在自己的计算机屏幕上将这些页面显示出来。

\(4\) 怎样使用户能够很方便地找到所需的信息？为了在万维网上方便地查找信息，用户可使用各种的搜索工具（即搜索引擎）。



### 6.4.2 统一资源定位符 URL

1. URL的格式

   统一资源定位符 URL 是对可以从因特网上得到的资源的位置和访问方法的一种简洁的表示。URL 给资源的位置提供一种抽象的识别方法，并用这种方法给资源定位。只要能够对资源定位，系统就可以对资源进行各种操作，如存取、更新、替换和查找其属性。URL 相当于一个文件名在网络范围的扩展。因此 URL 是与因特网相连的机器上的任何可访问对象的一个指针。

URL 的一般形式

由以冒号隔开的两大部分组成，并且在 URL 中的字符对大写或小写没有要求。URL 的一般形式是：









使用 HTTP 的 URL

使用 HTTP 的 URL 的一般形式











### 6.4.3 超文本传送协议 HTTP

1. HTTP 的操作过程

为了使超文本的链接能够高效率地完成，需要用 HTTP 协议来传送一切必须的信息。从层次的角度看，HTTP 是面向事务的\(transaction-oriented\)应用层协议，它是万维网上能够可靠地交换文件（包括文本、声音、图像等各种多媒体文件）的重要基础。



万维网的工作过程



用户点击鼠标后所发生的事件

\(1\) 浏览器分析超链指向页面的 URL。\(2\) 浏览器向 DNS 请求解析[www.tsinghua.edu.cn](www.tsinghua.edu.cn)的 IP 地址。\(3\) 域名系统 DNS 解析出清华大学服务器的 IP 地址。\(4\) 浏览器与服务器建立 TCP 连接\(5\) 浏览器发出取文件命令：

```
  GET /chn/yxsz/index.htm。
```

\(6\) 服务器给出响应，把文件 index.htm 发给浏览器。\(7\) TCP 连接释放。\(8\) 浏览器显示“清华大学院系设置”文件 index.htm 中的所有文本。



HTTP 的主要特点

HTTP 是面向事务的客户服务器协议。HTTP 1.0 协议是无状态的\(stateless\)。HTTP 协议本身也是无连接的，虽然它使用了面向连接的 TCP 向上提供的服务。



请求一个万维网文档所需的时间





持续连接\(persistent connection\)

HTTP/1.1 协议使用持续连接。万维网服务器在发送响应后仍然在一段时间内保持这条连接，使同一个客户（浏览器）和该服务器可以继续在这条连接上传送后续的 HTTP 请求报文和响应报文。这并不局限于传送同一个页面上链接的文档，而是只要这些文档都在同一个服务器上就行。目前一些流行的浏览器（例如，IE 6.0）的默认设置就是使用 HTTP/1.1。



持续连接的两种工作方式

非流水线方式：客户在收到前一个响应后才能发出下一个请求。这比非持续连接的两倍 RTT 的开销节省了建立 TCP 连接所需的一个 RTT 时间。但服务器在发送完一个对象后，其 TCP 连接就处于空闲状态，浪费了服务器资源。流水线方式：客户在收到 HTTP 的响应报文之前就能够接着发送新的请求报文。一个接一个的请求报文到达服务器后，服务器就可连续发回响应报文。使用流水线方式时，客户访问所有的对象只需花费一个 RTT时间，使 TCP 连接中的空闲时间减少，提高了下载文档效率。



代理服务器\(proxy server\)

代理服务器\(proxy server\)又称为万维网高速缓存\(Web cache\)，它代表浏览器发出 HTTP 请求。万维网高速缓存把最近的一些请求和响应暂存在本地磁盘中。当与暂时存放的请求相同的新请求到达时，万维网高速缓存就把暂存的响应发送出去，而不需要按 URL 的地址再去因特网访问该资源。



使用高速缓存可减少访问因特网服务器的时延





使用高速缓存的情况

\(1\) 浏览器访问因特网的服务器时，要先与校园网的高速缓存建立 TCP 连接，并向高速缓存发出 HTTP 请求报文 \]



\(2\) 若高速缓存已经存放了所请求的对象，则将此对象放入 HTTP 响应报文中返回给浏览器。



\(3\) 否则，高速缓存就代表发出请求的用户浏览器，与因特网上的源点服务器建立 TCP 连接，并发送 HTTP 请求报文。



\(4\) 源点服务器将所请求的对象放在 HTTP 响应报文中返回给校园网的高速缓存。



\(5\) 高速缓存收到此对象后，先复制在其本地存储器中（为今后使用），然后再将该对象放在 HTTP 响应报文中，通过已建立的 TCP 连接，返回给请求该对象的浏览器。



1. HTTP 的报文结构



HTTP 有两类报文：请求报文——从客户向服务器发送请求报文。响应报文——从服务器到客户的回答。由于 HTTP 是面向正文的\(text-oriented\)，因此在报文中的每一个字段都是一些 ASCII 码串，因而每个字段的长度都是不确定的。



HTTP 的报文结构（请求报文）



报文由三个部分组成，即开始行、首部行和实体主体。在请求报文中，开始行就是请求行。



“方法”是面向对象技术中使用的专门名词。所谓“方法”就是对所请求的对象进行的操作，因此这些方法实际上也就是一些命令。因此，请求报文的类型是由它所采用的方法决定的。

HTTP 请求报文的一些方法



HTTP 的报文结构（请求报文）



“URL”是所请求的资源的 URL。



“版本”是 HTTP 的版本。



响应报文的开始行是状态行。状态行包括三项内容，即 HTTP 的版本，状态码，以及解释状态码的简单短语。





状态码都是三位数字

1xx 表示通知信息的，如请求收到了或正在进行处理。2xx 表示成功，如接受或知道了。3xx 表示重定向，表示要完成请求还必须采取进一步的行动。4xx 表示客户的差错，如请求中有错误的语法或不能完成。5xx 表示服务器的差错，如服务器失效无法完成请求。



1. 在服务器上存放用户的信息

万维网站点使用 Cookie 来跟踪用户。Cookie 表示在 HTTP 服务器和客户之间传递的状态信息。使用 Cookie 的网站服务器为用户产生一个唯一的识别码。利用此识别码，网站就能够跟踪该用户在该网站的活动。





### 6.4.4 万维网的文档



1. 超文本标记语言 HTML

超文本标记语言 HTML 中的 Markup 的意思就是“设置标记”。HTML 定义了许多用于排版的命令（即标签）。HTML 把各种标签嵌入到万维网的页面中。这样就构成了所谓的 HTML 文档。HTML 文档是一种可以用任何文本编辑器创建的 ASCII 码文件。

HTML 文档

仅当 HTML 文档是以.html 或 .htm 为后缀时，浏览器才对此 文档的各种标签进行解释。如 HTML 文档改换以 .txt 为其后缀，则 HTML 解释程序就不对标签进行解释，而浏览器只能看见原来的文本文件。当浏览器从服务器读取 HTML 文档后，就按照 HTML 文档中的各种标签，根据浏览器所使用的显示器的尺寸和分辨率大小，重新进行排版并恢复出所读取的页面。



HTML 文档中标签的用法



两种不同的链接

远程链接：超链的终点是其他网点上的页面。本地链接：超链指向本计算机中的某个文件。

1. 动态万维网文档

静态文档是指该文档创作完毕后就存放在万维网服务器中，在被用户浏览的过程中，内容不会改变。动态文档是指文档的内容是在浏览器访问万维网服务器时才由应用程序动态创建。动态文档和静态文档之间的主要差别体现在服务器一端。这主要是文档内容的生成方法不同。而从浏览器的角度看，这两种文档并没有区别。

万维网服务器功能的扩充

\(1\) 应增加另一个应用程序，用来处理浏览器发来的数据，并创建动态文档。\(2\) 应增加一个机制，用来使万维网服务器把浏览器发来的数据传送给这个应用程序，然后万维网服务器能够解释这个应用程序的输出，并向浏览器返回 HTML 文档。



扩充了功能的万维网服务器



通用网关接口 CGI\(Common Gateway Interface\)

CGI 是一种标准，它定义了动态文档应如何创建，输入数据应如何提供给应用程序，以及输出结果应如何使用。万维网服务器与 CGI 的通信遵循 CGI 标准。“通用”：CGI 标准所定义的规则对其他任何语言都是通用的。“网关”：CGI 程序的作用像网关。“接口”：有一些已定义好的变量和调用等可供其他 CGI 程序使用。



CGI 程序

CGI 程序的正式名字是 CGI 脚本\(script\)。“脚本”指的是一个程序，它被另一个程序（解释程序）而不是计算机的处理机来解释或执行。脚本运行起来要比一般的编译程序要慢，因为它的每一条指令先要被另一个程序来处理（这就要一些附加的指令），而不是直接被指令处理器来处理。



1. 活动万维网文档

活动文档\(active document\)技术把所有的工作都转移给浏览器端。每当浏览器请求一个活动文档时，服务器就返回一段程序副本在浏览器端运行。活动文档程序可与用户直接交互，并可连续地改变屏幕的显示。由于活动文档技术不需要服务器的连续更新传送，对网络带宽的要求也不会太高。

活动文档在客户端创建



用 Java 技术创建活动文档

由美国 Sun 公司开发的 Java 语言是一项用于创建和运行活动文档的技术。在 Java 技术中使用 “小应用程序”\(applet\)来描述活动文档程序。用户从万维网服务器下载嵌入了 Java 小应用程序的 HTML 文档后，可在浏览器的屏幕上点击某个图像，就可看到动画效果，或在下拉式菜单中点击某个项目，就可看到计算结果。Java 技术是活动文档技术的一部分。



Java 技术装三个主要组成部分

\(1\) 程序设计语言。Java 包含一个新的程序设计语言，用来编写传统的计算机程序和 Java 小应用程序。\(2\) 运行\(runtime\)环境。这是运行 Java 程序所必须的运行环境，其中包括 Java 虚拟机（简称为 JVM），该软件定义了 Java 二进制代码的执行模型。\(3\) 类库\(class library\)。为了更容易编写 Java 小应用程序，Java 提供了强大的类库支持。



Java

Java 是一种面向对象的高级语言，从 C++ 派生出来的，它省略了 C++ 很多复杂的、很少用的语言特点。Java 的每一个数据项都有一个确定的类型。对数据的操作严格按照该数据的类型来进行。Java 的编译程序将源程序转换成 Java 字节码\(bytecode\)，这是一种与机器无关的二进制代码。计算机程序调用解释程序读取字节码，并解释执行。



计算机硬件无关

Java 语言、字节码以及 Java 运行系统都被设计成与计算机硬件无关。一旦形成了字节码，就可在任何计算机上运行并产生相同的输出。Java 小应用程序与机器无关可使在任何计算机上运行的浏览器程序能够下载并运行活动文档。可保证活动文档在所有的浏览器上产生同样的正确输出。可大大地降低活动文档的创建和测试费用，因为不必为每一种计算机都制作一个副本。



Java 解释程序

运行 Java 的浏览器需要有 HTML 解释程序和 Java 小应用程序解释程序。解释程序的核心是一个模仿计算机的简单循环。解释程序维持一个指令指针，在初始化时指在小应用程序的开始处。在每一次循环操作时，解释程序在指令指针指向的地址读取字节码。然后解释程序对字节码进行解码，并完成指明的操作。



1. 浏览器的结构



浏览器的主要组成部分

浏览器有一组客户、一组解释程序，以及管理这些客户和解释程序的控制程序。控制程序是其中的核心部件，它解释鼠标的点击和键盘的输入，并调用有关的组件来执行用户指定的操作。例如，当用户用鼠标点击一个超链的起点时，控制程序就调用一个客户从所需文档所在的远地服务器上取回该文档，并调用解释程序向用户显示该文档。



解释程序

HTML 解释程序是必不可少的，而其他的解释程序则是可选的。解释程序把 HTML 规格转换为适合用户显示硬件的命令来处理版面的细节。许多浏览器还包含 FTP 客户程序，用来获取文件传送服务。一些浏览器也包含电子邮件客户程序，使浏览器能够发送和接收电子邮件。



浏览器中的缓存

浏览器将它取回的每一个页面副本都放入本地磁盘的缓存中。当用户用鼠标点击某个选项时，浏览器首先检查磁盘的缓存。若缓存中保存了该项，浏览器就直接从缓存中得到该项副本而不必从网络获取，这样就明显地改善浏览器的运行特性。 。但缓存要占用磁盘大量的空间，而浏览器性能的改善只有在用户再次查看缓存中的页面时才有帮助。许多浏览器允许用户调整缓存策略。





### 6.4.5 万维网的信息检索系统

1. 全文检索搜索和分类目录搜索

在万维网中用来进行搜索的程序叫做搜索引擎。全文检索搜索引擎是一种纯技术型的检索工具。它的工作原理是通过搜索软件到因特网上的各网站收集信息，找到一个网站后可以从这个网站再链接到另一个网站。然后按照一定的规则建立一个很大的在线数据库供用户查询。用户在查询时只要输入关键词，就从已经建立的索引数据库上进行查询（并不是实时地在因特网上检索到的信息）。



分类目录搜索

分类目录搜索引擎并不采集网站的任何信息，而是利用各网站向搜索引擎提交的网站信息时填写的关键词和网站描述等信息，经过人工审核编辑后，如果认为符合网站登录的条件，则输入到分类目录的数据库中，供网上用户查询。分类目录搜索也叫做分类网站搜索。



一些著名的搜索引擎

最著名的全文检索搜索引擎：Google（谷歌）\([www.google.com](www.google.com)\)百度 \([www.baidu.com](www.baidu.com)\)最著名的分类目录搜索引擎：雅虎 \([www.yahoo.com](www.yahoo.com)\)雅虎中国 \(cn.yahoo.com\)新浪 \([www.sina.com](www.sina.com)\)搜狐 \([www.sohu.com](www.sohu.com)\)网易 \([www.163.com](www.163.com)\)



垂直搜索引擎\(Vertical Search Engine\)

针对某一特定领域、特定人群或某一特定需求提供搜索服务。垂直搜索也是提供关键字来进行搜索的，但被放到了一个行业知识的上下文中，返回的结果更倾向于信息、消息、条目等。

