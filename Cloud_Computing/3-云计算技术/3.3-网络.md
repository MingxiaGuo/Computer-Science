
* [数据中心网络架构](数据中心网络架构.md)

网络是云计算所有技术中最复杂和最重要的技术之一，SDN在云计算网络中有非常重要的应用。





从网络分层维度，现代数据网络从上到下分为：

* 应用层
* 传输层
* 网络层
* 数据链路层

从地理范围维度，网络存在：

* 局域网
* 广域网
* 城域网

从传输效率：

* 百兆链路
* 千兆链路
* 万兆链路

以数据中心的边缘为边界（数据中心托管了云计算中所有技术资源），网络分为：

* 数据中心外的网络（外延——关注系统效率，下一代数据中心的网络平台）： 外部网络将计算行为的结果分发到不同的外部世界，覆盖更广泛的区域。数据中心的外延网络也就是数据中心出口同最终用户设备间的网络链路，这条链路决定了用户的体验。
  * 安全的网络：云计算存在的根基。杜绝黑客和其他攻击：
    * 认证
    * 加密
  * 可靠的网络：可靠是数据网络设计的基本原则。例云点播。网络可靠的基础是QoS（Quality of Service,网络服务质量保证），指的是数据网络中的一种控制机制，根据不同业务数据的优先级有针对性地分配带宽、缓存等网络资源，网络资源不足时，QoS保证优先级高的数据包得到优先处理，时对应的上层业务获得更好的网络服务。
    * 结合云计算业务特点，在云计算环境中规划网络QoS，搭建可靠的远程网络链路
  * 灵活的网络：云计算数据中心通常基于虚拟化技术搭建，计算资源不再锁死在一个地方，云计算用户和计算资源都具有加大的移动性，而连接两者的网络就必须在不断移动的情况下，将用户的请求和服务器计算的结果准确送到新位置
    * 新技术
    * 新架构

* 数据中心内的网络（内涵——关注系统效率、用户体验）：内部网络承载云计算的核心技术资源。
  * 新标准
  * 新架构
  * 新产品

新一代 网络设备的架构和特点

网络世界的争论点主要集中在如何从使软件定义网络与网络虚拟化的新架构代替传统以太网架构。

## 网络架构：

传统架构：在传统的大型数据中心，网络通常是三层结构。架构模型包含了以下三层：

* Access Layer（接入层）：接入层位与网络的最底层，负责所有终端设备的接入工作，并确保各终端设备可以通过网络进行数据包的传递。

* Aggregation Layer（汇聚层）：汇聚层位于接入层和核心层之间。该层可以通过实现ACL等其他过滤器来提供区域的定义。
* Core Layer（核心层）：又被称为网络的骨干。该层的网络设备为所有的数据包包提供高速转发，通过L3路由网络将各个区域进行连接，保证各区域内部终端设备的路由可达。

一般情况下，传统网络还存在着一些优点：

* 精确的过滤器/策略创建和应用：由于区域、终端地址网段明确，可以精细控制网络策略，保证流量的安全。
* 稳定的网络：区域的明确划分，网络设备的稳定架构，使网络更具有稳定性。
* 广播域的有效控制：由于三层架构中间采用L3模式设计，有效控制广播域的大小。

传统网络架构虽然稳定，但随着技术的不断发展，应用不断的多元化以及对业务的高冗余化的需求，暴露出了一些传统网络的弊端。

随着公司的发展，传统网络架构渐渐开始无法跟上步伐，逐渐出现了以下问题：

**1、业务流量模型不清晰**  
随着网络的发展、各种新技术的产生，数据中心内部、服务器之间协同处理、计算，导致由东向西的流量逐渐增大，超过了由南向北的流量。而传统三层架构服务器间交换，都要过三层核心，多层转发，增大了网络的延迟，还浪费了核心宝贵的资源。与此同时，我们将业务拆分成多个模块，并部署在不同的区域中，由于应用的不断发展，模块的数量越来越多，模块之间的调用越来越频繁，可能一次完整的应用流程需要经历数十个模块，模块之间的频繁调用大大消耗了网络设备的资源。

**2、横向扩展能力不足**  
传统数据中心使用STP技术，虽然上联多根链路，但都是主备关系，仅有一根链路能跑流量，无法承载数据中心日益增长的业务。尽管后续使用了有相关的Ethernet Channel、堆叠、VSS等技术，来达到链路冗余的需求，但是堆叠、Ethernet Channel不可能无限地进行扩展。

**3、广播域过于庞大**  
随着业务的发展，计算资源被池化。为了使得计算资源可以任意分配，需要一个巨大的二层网络架构。整个数据中心网络都是多个L2广播域，这样，服务器可以在规定的区域地点创建、迁移，而不需要对IP地址或者默认网关做修改。不断地业务扩展，造就了一个巨大的二层广播域，一旦出现一点问题就造成巨大的网络问题，导致业务中断，业务的高可用性就无法保证。

**4、计算资源无法快速上线**  
随着业务的不断发展，计算资源的虚拟化。当需要进行虚拟资源部署时，严格安全防护的要求下，需要进行安全设备的策略开通。从部署到正式上线使用之间的耗时会长达1小时之久。无法满足在突发情况下，快速增加计算资源。

由于安全设备以及设备上联位置的限制，无法在任意的计算资源池中随意的创建、迁移；无法合理分配资源池的各种硬件资源，造成资源的分配不均衡。一旦某资源池已达阈值，就无法继续计算资源的横向扩展。

**5、网络延时过大**  
在使用传统网络架构时，每个业务模块都是一个烟囱结构，业务模块互相调用需要经过多个三层设备（平均需要经过6次物理设备）其中还可能包括防火墙等安全设备。受限于设备的性能，网络架构的主备方案。数据流量每经过一次设备都会增加一点延迟。虽然每一次延时都是微乎其微，但是累计次数多了，对于业务来说这个延时可能就导致用户体检较差。

